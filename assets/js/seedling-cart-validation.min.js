document.addEventListener("DOMContentLoaded",function(){const e=seedlingCartSettings.ajaxUrl,t=[".checkout-button","#place_order","a.checkout",".mfn-ch-footer-buttons a.button_full_width"],o="seedling-dynamic-warning";function n(e){let t=document.getElementById(o);if(!t){t=document.createElement("ul"),t.id=o,t.className="woocommerce-error";const e=[document.querySelector(".mfn-ch-content"),document.querySelector(".woocommerce-notices-wrapper"),document.querySelector(".woocommerce-cart-form"),document.querySelector(".woocommerce-checkout-review-order"),document.querySelector(".woocommerce-mini-cart"),document.querySelector("body")];for(const o of e)if(o){o.prepend(t);break}}t.innerHTML=e.map(e=>`<li>${e}</li>`).join("")}function c(e){t.forEach(t=>{document.querySelectorAll(t).forEach(t=>{e?(t.classList.add("disabled"),t.setAttribute("aria-disabled","true"),t.addEventListener("click",r)):(t.classList.remove("disabled"),t.removeAttribute("aria-disabled"),t.removeEventListener("click",r))})})}function r(e){const t=e.currentTarget;(t.classList.contains("disabled")||"true"===t.getAttribute("aria-disabled"))&&(e.preventDefault(),e.stopPropagation())}function i(){fetch(e+`&nonce=${seedlingCartSettings.nonce}`,{credentials:"same-origin"}).then(e=>e.json()).then(e=>{const t=e.valid,r=e.messages||[];t?(document.getElementById(o)?.remove(),c(!1)):(n(r),c(!0))}).catch(()=>{n(["Ошибка проверки корзины"]),c(!0)})}i();const a=function(e,t){let o;return function(...n){clearTimeout(o),o=setTimeout(()=>e.apply(this,n),t)}}(i,300);jQuery(document.body).on("wc_fragments_refreshed updated_wc_div",a),jQuery(document.body).on("change",".cart_item input.qty",a)});